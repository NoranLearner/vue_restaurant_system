{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-792da37e\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"text-center\"\n}, \"Update Your Profile\", -1 /* HOISTED */));\nconst _hoisted_3 = {\n  class: \"row g-3 align-items-center\"\n};\nconst _hoisted_4 = {\n  class: \"col-auto d-block mx-auto\"\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"error-feedback\"\n};\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_7 = {\n  class: \"row g-3 align-items-center\"\n};\nconst _hoisted_8 = {\n  class: \"col-auto d-block mx-auto\"\n};\nconst _hoisted_9 = {\n  key: 0,\n  class: \"error-feedback\"\n};\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_11 = {\n  class: \"row g-3 align-items-center\"\n};\nconst _hoisted_12 = {\n  class: \"col-auto d-block mx-auto\"\n};\nconst _hoisted_13 = {\n  key: 0,\n  class: \"error-feedback\"\n};\nconst _hoisted_14 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_15 = {\n  class: \"row g-3 align-items-center\"\n};\nconst _hoisted_16 = {\n  class: \"col-auto d-block mx-auto\"\n};\nconst _hoisted_17 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_18 = {\n  class: \"row g-3 align-items-center\"\n};\nconst _hoisted_19 = {\n  class: \"col-auto d-block mx-auto error-feedback\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Navbar = _resolveComponent(\"Navbar\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_Navbar), _createElementVNode(\"form\", {\n    onClick: _cache[4] || (_cache[4] = _withModifiers(() => {}, [\"prevent\"]))\n  }, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    placeholder: \"Enter Your Name\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.name = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.name]]), $data.v$.name.$error ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, _toDisplayString($data.v$.name.$errors[0].$message), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])]), _hoisted_6, _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"email\",\n    class: \"form-control\",\n    placeholder: \"Enter Your Email\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.email = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.email]]), $data.v$.email.$error ? (_openBlock(), _createElementBlock(\"span\", _hoisted_9, _toDisplayString($data.v$.email.$errors[0].$message), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])]), _hoisted_10, _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"div\", _hoisted_12, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    class: \"form-control\",\n    placeholder: \"Enter Your Password\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.password = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.password]]), $data.v$.password.$error ? (_openBlock(), _createElementBlock(\"span\", _hoisted_13, _toDisplayString($data.v$.password.$errors[0].$message), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])]), _hoisted_14, _createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"button\", {\n    type: \"submit\",\n    onClick: _cache[3] || (_cache[3] = $event => $options.updateProfileNow()),\n    class: \"btn btn-primary\"\n  }, \"Update Profile Now\")])]), _hoisted_17, _createElementVNode(\"div\", _hoisted_18, [_createElementVNode(\"div\", _hoisted_19, _toDisplayString($data.updateError), 1 /* TEXT */)])])]);\n}","map":{"version":3,"mappings":";;;EACSA,KAAK,EAAC;AAAW;gEAGdC,oBAAgD;EAA5CD,KAAK,EAAC;AAAa,GAAC,qBAAmB;;EACtCA,KAAK,EAAC;AAA4B;;EAC9BA,KAAK,EAAC;AAA0B;;;EAE3BA,KAAK,EAAC;;gEAGpBC,oBAAM;;EACDD,KAAK,EAAC;AAA4B;;EAC9BA,KAAK,EAAC;AAA0B;;;EAE3BA,KAAK,EAAC;;iEAGpBC,oBAAM;;EACDD,KAAK,EAAC;AAA4B;;EAC9BA,KAAK,EAAC;AAA0B;;;EAE3BA,KAAK,EAAC;;iEAGpBC,oBAAM;;EACDD,KAAK,EAAC;AAA4B;;EAC9BA,KAAK,EAAC;AAA0B;iEAIzCC,oBAAM;;EACDD,KAAK,EAAC;AAA4B;;EAC9BA,KAAK,EAAC;AAAyC;;;uBAhChEE,oBAsCM,OAtCNC,UAsCM,GArCFC,aAAUC,oBACVJ,oBAkCO;IAlCAK,OAAK,2CAAN,QAAc;MAChBC,UAAgD,EAChDN,oBAKM,OALNO,UAKM,GAJFP,oBAGM,OAHNQ,UAGM,mBAFFR,oBAAqF;IAA9ES,IAAI,EAAC,MAAM;IAACV,KAAK,EAAC,cAAc;IAACW,WAAW,EAAC,iBAAiB;+DAAUC,UAAI;iDAAJA,UAAI,KAChDA,QAAE,CAACC,IAAI,CAACC,MAAM,kBAAjDZ,oBAA2F,QAA3Fa,UAA2F,mBAArCH,QAAE,CAACC,IAAI,CAACG,OAAO,IAAIC,QAAQ,2DAGzFC,UAAM,EACNjB,oBAKM,OALNkB,UAKM,GAJFlB,oBAGM,OAHNmB,UAGM,mBAFFnB,oBAAwF;IAAjFS,IAAI,EAAC,OAAO;IAACV,KAAK,EAAC,cAAc;IAACW,WAAW,EAAC,kBAAkB;+DAAUC,WAAK;iDAALA,WAAK,KACnDA,QAAE,CAACS,KAAK,CAACP,MAAM,kBAAlDZ,oBAA6F,QAA7FoB,UAA6F,mBAAtCV,QAAE,CAACS,KAAK,CAACL,OAAO,IAAIC,QAAQ,2DAG3FM,WAAM,EACNtB,oBAKM,OALNuB,WAKM,GAJFvB,oBAGM,OAHNwB,WAGM,mBAFFxB,oBAAiG;IAA1FS,IAAI,EAAC,UAAU;IAACV,KAAK,EAAC,cAAc;IAACW,WAAW,EAAC,qBAAqB;+DAAUC,cAAQ;iDAARA,cAAQ,KAC5DA,QAAE,CAACc,QAAQ,CAACZ,MAAM,kBAArDZ,oBAAmG,QAAnGyB,WAAmG,mBAAzCf,QAAE,CAACc,QAAQ,CAACV,OAAO,IAAIC,QAAQ,2DAGjGW,WAAM,EACN3B,oBAIM,OAJN4B,WAIM,GAHF5B,oBAEM,OAFN6B,WAEM,GADF7B,oBAAqG;IAA7FS,IAAI,EAAC,QAAQ;IAAEJ,OAAK,sCAAEyB,yBAAgB;IAAI/B,KAAK,EAAC;KAAkB,oBAAkB,OAGpGgC,WAAM,EACN/B,oBAIM,OAJNgC,WAIM,GAHFhC,oBAEM,OAFNiC,WAEM,mBADCtB,iBAAW","names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_createVNode","_component_Navbar","onClick","_hoisted_2","_hoisted_3","_hoisted_4","type","placeholder","$data","name","$error","_hoisted_5","$errors","$message","_hoisted_6","_hoisted_7","_hoisted_8","email","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","password","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","$options","_hoisted_17","_hoisted_18","_hoisted_19"],"sourceRoot":"","sources":["/opt/lampp/htdocs/rest-sys-2021/src/components/Profile/UpdateProfileForm.vue"],"sourcesContent":["<template>\n    <div class=\"container\">\n        <Navbar />\n        <form @click.prevent>\n            <h1 class=\"text-center\">Update Your Profile</h1>\n            <div class=\"row g-3 align-items-center\">\n                <div class=\"col-auto d-block mx-auto\">\n                    <input type=\"text\" class=\"form-control\" placeholder=\"Enter Your Name\" v-model=\"name\">\n                    <span class=\"error-feedback\" v-if=\"v$.name.$error\">{{ v$.name.$errors[0].$message }}</span>\n                </div>\n            </div>\n            <br />\n            <div class=\"row g-3 align-items-center\">\n                <div class=\"col-auto d-block mx-auto\">\n                    <input type=\"email\" class=\"form-control\" placeholder=\"Enter Your Email\" v-model=\"email\">\n                    <span class=\"error-feedback\" v-if=\"v$.email.$error\">{{ v$.email.$errors[0].$message }}</span>\n                </div>\n            </div>\n            <br />\n            <div class=\"row g-3 align-items-center\">\n                <div class=\"col-auto d-block mx-auto\">\n                    <input type=\"password\" class=\"form-control\" placeholder=\"Enter Your Password\" v-model=\"password\">\n                    <span class=\"error-feedback\" v-if=\"v$.password.$error\">{{ v$.password.$errors[0].$message }}</span>\n                </div>\n            </div>\n            <br />\n            <div class=\"row g-3 align-items-center\">\n                <div class=\"col-auto d-block mx-auto\">\n                    <button type=\"submit\" @click=\"updateProfileNow()\" class=\"btn btn-primary\">Update Profile Now</button>\n                </div>\n            </div>\n            <br />\n            <div class=\"row g-3 align-items-center\">\n                <div class=\"col-auto d-block mx-auto error-feedback\">\n                    {{ updateError }}\n                </div>\n            </div>\n        </form>\n\n    </div>\n</template>\n\n<script>\nimport Navbar from '@/components/Header/Navbar.vue';\nimport axios from \"axios\";\n// For redirect to links\nimport { mapActions } from \"vuex\";\n// For validate data\nimport useValidate from \"@vuelidate/core\";\nimport { required, email, minLength } from \"@vuelidate/validators\";\n\nexport default {\n    name: \"UpdateProfileForm\",\n    components: { Navbar },\n    data() {\n        return {\n            v$: useValidate(),\n            name: \"\",\n            email: \"\",\n            password: \"\",\n            userId: \"\",\n            updateError: \"\",\n        }\n    },\n    validations() {\n        return {\n            name: { required, minLength: minLength(10) },\n            email: { required, email },\n            password: { required, minLength: minLength(10) },\n        }\n    },\n    mounted() {\n        let user = localStorage.getItem(\"user-info\");\n        if (user) {\n            this.name = JSON.parse(user).name;\n            this.email = JSON.parse(user).email;\n            this.password = JSON.parse(user).password;\n            this.userId = JSON.parse(user).id;\n        } else {\n            this.redirectTo({ val: 'sign-up' });\n        }\n    },\n    methods: {\n        ...mapActions(['redirectTo']),\n        async updateProfileNow() {\n            this.v$.$validate();\n            if (!this.v$.$error) { \n                console.log(\"Form Validated Successfully\");\n                // Update Date\n                let result = await axios.put(`http://localhost:3000/users/${this.userId}`, {\n                    name: this.name,\n                    email: this.email,\n                    password: this.password,\n                });\n                if (result.status == 200) {\n                    console.log(\"Profile is Updated Successfully\");\n                    // save user data in local storage\n                    localStorage.setItem(\"user-info\", JSON.stringify(result.data));\n                    // redirect to home page\n                    // this.redirectTo({ val: 'profile' });\n                    this.$router.push({ name: \"profile\", params:{pageTitle: \"Profile Page\"}})\n                } else {\n                    this.updateError = \"Something Went Wrong, Try Again\";\n                }\n            } else {\n                this.updateError = \"Something Went Wrong, Refresh The Page\";\n            }\n        },\n    },\n}\n</script>\n\n<style scoped lang=\"scss\">\n.error-feedback {\n    color: red;\n    font-size: 0.85em;\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}