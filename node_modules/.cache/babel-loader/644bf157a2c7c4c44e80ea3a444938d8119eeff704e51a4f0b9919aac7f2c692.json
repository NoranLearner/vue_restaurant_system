{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-ecd6041a\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"text-center\"\n}, \"Sign Up\", -1 /* HOISTED */));\nconst _hoisted_3 = {\n  class: \"row g-3 align-items-center\"\n};\nconst _hoisted_4 = {\n  class: \"col-auto d-block mx-auto\"\n};\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"floatingEmail\"\n}, \"Enter Your Name\", -1 /* HOISTED */));\nconst _hoisted_6 = {\n  key: 0,\n  class: \"error-feedback\"\n};\nconst _hoisted_7 = {\n  class: \"row g-3 align-items-center\"\n};\nconst _hoisted_8 = {\n  class: \"col-auto d-block mx-auto\"\n};\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"floatingEmail\"\n}, \"Enter Your Email\", -1 /* HOISTED */));\nconst _hoisted_10 = {\n  key: 0,\n  class: \"error-feedback\"\n};\nconst _hoisted_11 = {\n  class: \"row g-3 align-items-center\"\n};\nconst _hoisted_12 = {\n  class: \"col-auto d-block mx-auto\"\n};\nconst _hoisted_13 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"floatingPassword\"\n}, \"Enter Your Password\", -1 /* HOISTED */));\nconst _hoisted_14 = {\n  key: 0,\n  class: \"error-feedback\"\n};\nconst _hoisted_15 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_16 = {\n  class: \"row g-3 align-items-center\"\n};\nconst _hoisted_17 = {\n  class: \"col-auto d-block mx-auto\"\n};\nconst _hoisted_18 = {\n  class: \"d-flex justify-content-center\"\n};\nconst _hoisted_19 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_20 = {\n  class: \"row g-3 align-items-center\"\n};\nconst _hoisted_21 = {\n  key: 0,\n  class: \"col-auto d-block mx-auto alert alert-success\"\n};\nconst _hoisted_22 = {\n  key: 1,\n  class: \"col-auto d-block mx-auto alert alert-danger\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"form\", {\n    onClick: _cache[5] || (_cache[5] = _withModifiers(() => {}, [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createCommentVNode(\" https://getbootstrap.com/docs/5.0/forms/floating-labels/ \"), _createElementVNode(\"div\", {\n    class: _normalizeClass([\"form-floating mb-3\", {\n      'form-group--error': $data.v$.email.$error\n    }])\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control w300\",\n    id: \"floatingEmail\",\n    placeholder: \"Enter Your Name\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.name = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.name, void 0, {\n    trim: true\n  }]]), _hoisted_5, $data.v$.name.$error ? (_openBlock(), _createElementBlock(\"span\", _hoisted_6, _toDisplayString($data.v$.name.$errors[0].$message), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)], 2 /* CLASS */)])]), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", {\n    class: _normalizeClass([\"form-floating mb-3\", {\n      'form-group--error': $data.v$.email.$error\n    }])\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"email\",\n    class: \"form-control w300\",\n    id: \"floatingEmail\",\n    placeholder: \"Enter Your Email\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.email = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.email, void 0, {\n    trim: true\n  }]]), _hoisted_9, $data.v$.email.$error ? (_openBlock(), _createElementBlock(\"span\", _hoisted_10, _toDisplayString($data.v$.email.$errors[0].$message), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)], 2 /* CLASS */)])]), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"div\", {\n    class: _normalizeClass([\"form-floating\", {\n      'form-group--error': $data.v$.password.$error\n    }])\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    class: \"form-control w300\",\n    id: \"floatingPassword\",\n    placeholder: \"Enter Your Password\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.password = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.password, void 0, {\n    trim: true\n  }]]), _hoisted_13, $data.v$.password.$error ? (_openBlock(), _createElementBlock(\"span\", _hoisted_14, _toDisplayString($data.v$.password.$errors[0].$message), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)], 2 /* CLASS */)])]), _hoisted_15, _createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"div\", _hoisted_17, [_createElementVNode(\"button\", {\n    type: \"submit\",\n    onClick: _cache[3] || (_cache[3] = $event => $options.validateEmail()),\n    class: \"btn btn-primary w300\"\n  }, \" Sign Up Now \"), _createElementVNode(\"div\", _hoisted_18, [_createElementVNode(\"button\", {\n    type: \"button\",\n    onClick: _cache[4] || (_cache[4] = $event => _ctx.redirectTo({\n      val: 'login'\n    })),\n    class: \"btn btn-link\"\n  }, \"Have an account, Login Now\")])])]), _hoisted_19, _createElementVNode(\"div\", _hoisted_20, [$data.successMessage.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_21, _toDisplayString($data.successMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), $data.errorMessage.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_22, _toDisplayString($data.errorMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])])]);\n}","map":{"version":3,"mappings":";;;EACSA,KAAK,EAAC;AAAW;gEAClBC,oBAAoC;EAAhCD,KAAK,EAAC;AAAa,GAAC,SAAO;;EAEtBA,KAAK,EAAC;AAA4B;;EAC9BA,KAAK,EAAC;AAA0B;gEAK7BC,oBAAkD;EAA3CC,GAAG,EAAC;AAAe,GAAC,iBAAe;;;EACpCF,KAAK,EAAC;;;EAInBA,KAAK,EAAC;AAA4B;;EAC9BA,KAAK,EAAC;AAA0B;gEAI7BC,oBAAmD;EAA5CC,GAAG,EAAC;AAAe,GAAC,kBAAgB;;;EACrCF,KAAK,EAAC;;;EAInBA,KAAK,EAAC;AAA4B;;EAC9BA,KAAK,EAAC;AAA0B;iEAI7BC,oBAAyD;EAAlDC,GAAG,EAAC;AAAkB,GAAC,qBAAmB;;;EAC3CF,KAAK,EAAC;;iEAIxBC,oBAAM;;EACDD,KAAK,EAAC;AAA4B;;EAC9BA,KAAK,EAAC;AAA0B;;EAI5BA,KAAK,EAAC;AAA+B;iEAMlDC,oBAAM;;EACDD,KAAK,EAAC;AAA4B;;;EAC9BA,KAAK,EAAC;;;;EAGNA,KAAK,EAAC;;;uBAnDvBG,oBAwDM,OAxDNC,UAwDM,GAvDFC,UAAoC,EACpCJ,oBAqDO;IArDAK,OAAK,2CAAN,QAAc;MAChBL,oBAUM,OAVNM,UAUM,GATFN,oBAQM,OARNO,UAQM,GAPFC,iFAAiE,EACjER,oBAKM;IALDD,KAAK,mBAAC,oBAAoB;MAAA,qBAAgCU,QAAE,CAACC,KAAK,CAACC;IAAM;sBAC1EX,oBACwB;IADjBY,IAAI,EAAC,MAAM;IAACb,KAAK,EAAC,mBAAmB;IAACc,EAAE,EAAC,eAAe;IAACC,WAAW,EAAC,iBAAiB;+DAC3EL,UAAI;iDAAJA,UAAI;UAAlB;EAAmB,MACvBM,UAAkD,EACfN,QAAE,CAACO,IAAI,CAACL,MAAM,kBAAjDT,oBAA2F,QAA3Fe,UAA2F,mBAArCR,QAAE,CAACO,IAAI,CAACE,OAAO,IAAIC,QAAQ,4EAI7FnB,oBASM,OATNoB,UASM,GARFpB,oBAOM,OAPNqB,UAOM,GANFrB,oBAKM;IALDD,KAAK,mBAAC,oBAAoB;MAAA,qBAAgCU,QAAE,CAACC,KAAK,CAACC;IAAM;sBAC1EX,oBACyB;IADlBY,IAAI,EAAC,OAAO;IAACb,KAAK,EAAC,mBAAmB;IAACc,EAAE,EAAC,eAAe;IAACC,WAAW,EAAC,kBAAkB;+DAC7EL,WAAK;iDAALA,WAAK;UAAnB;EAAoB,MACxBa,UAAmD,EAChBb,QAAE,CAACC,KAAK,CAACC,MAAM,kBAAlDT,oBAA6F,QAA7FqB,WAA6F,mBAAtCd,QAAE,CAACC,KAAK,CAACQ,OAAO,IAAIC,QAAQ,4EAI/FnB,oBASM,OATNwB,WASM,GARFxB,oBAOM,OAPNyB,WAOM,GANFzB,oBAKM;IALDD,KAAK,mBAAC,eAAe;MAAA,qBAAgCU,QAAE,CAACiB,QAAQ,CAACf;IAAM;sBACxEX,oBAC4B;IADrBY,IAAI,EAAC,UAAU;IAACb,KAAK,EAAC,mBAAmB;IAACc,EAAE,EAAC,kBAAkB;IAACC,WAAW,EAAC,qBAAqB;+DACtFL,cAAQ;iDAARA,cAAQ;UAAtB;EAAuB,MAC3BkB,WAAyD,EACtBlB,QAAE,CAACiB,QAAQ,CAACf,MAAM,kBAArDT,oBAAmG,QAAnG0B,WAAmG,mBAAzCnB,QAAE,CAACiB,QAAQ,CAACR,OAAO,IAAIC,QAAQ,4EAIrGU,WAAM,EACN7B,oBAUM,OAVN8B,WAUM,GATF9B,oBAQM,OARN+B,WAQM,GANF/B,oBAAkG;IAA1FY,IAAI,EAAC,QAAQ;IAAEP,OAAK,sCAAE2B,sBAAa;IAAIjC,KAAK,EAAC;KAAuB,eAAa,GAEzFC,oBAEM,OAFNiC,WAEM,GADFjC,oBAAoH;IAA5GY,IAAI,EAAC,QAAQ;IAAEP,OAAK,sCAAE6B,eAAU;MAAAC;IAAA;IAAoBpC,KAAK,EAAC;KAAe,4BAA0B,SAKvHqC,WAAM,EACNpC,oBAOM,OAPNqC,WAOM,GAN8D5B,oBAAc,CAAC6B,MAAM,sBAArFpC,oBAEM,OAFNqC,WAEM,mBADC9B,oBAAc,uDAE0CA,kBAAY,CAAC6B,MAAM,sBAAlFpC,oBAEM,OAFNsC,WAEM,mBADC/B,kBAAY","names":["class","_createElementVNode","for","_createElementBlock","_hoisted_1","_hoisted_2","onClick","_hoisted_3","_hoisted_4","_createCommentVNode","$data","email","$error","type","id","placeholder","_hoisted_5","name","_hoisted_6","$errors","$message","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","password","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","$options","_hoisted_18","_ctx","val","_hoisted_19","_hoisted_20","length","_hoisted_21","_hoisted_22"],"sourceRoot":"","sources":["/opt/lampp/htdocs/rest-sys-2021/src/components/SignUp/SignUpForm.vue"],"sourcesContent":["<template>\n    <div class=\"container\">\n        <h1 class=\"text-center\">Sign Up</h1>\n        <form @click.prevent>\n            <div class=\"row g-3 align-items-center\">\n                <div class=\"col-auto d-block mx-auto\">\n                    <!-- https://getbootstrap.com/docs/5.0/forms/floating-labels/ -->\n                    <div class=\"form-floating mb-3\" :class=\"{ 'form-group--error': v$.email.$error }\">\n                        <input type=\"text\" class=\"form-control w300\" id=\"floatingEmail\" placeholder=\"Enter Your Name\"\n                            v-model.trim=\"name\">\n                        <label for=\"floatingEmail\">Enter Your Name</label>\n                        <span class=\"error-feedback\" v-if=\"v$.name.$error\">{{ v$.name.$errors[0].$message }}</span>\n                    </div>\n                </div>\n            </div>\n            <div class=\"row g-3 align-items-center\">\n                <div class=\"col-auto d-block mx-auto\">\n                    <div class=\"form-floating mb-3\" :class=\"{ 'form-group--error': v$.email.$error }\">\n                        <input type=\"email\" class=\"form-control w300\" id=\"floatingEmail\" placeholder=\"Enter Your Email\"\n                            v-model.trim=\"email\">\n                        <label for=\"floatingEmail\">Enter Your Email</label>\n                        <span class=\"error-feedback\" v-if=\"v$.email.$error\">{{ v$.email.$errors[0].$message }}</span>\n                    </div>\n                </div>\n            </div>\n            <div class=\"row g-3 align-items-center\">\n                <div class=\"col-auto d-block mx-auto\">\n                    <div class=\"form-floating\" :class=\"{ 'form-group--error': v$.password.$error }\">\n                        <input type=\"password\" class=\"form-control w300\" id=\"floatingPassword\" placeholder=\"Enter Your Password\"\n                            v-model.trim=\"password\">\n                        <label for=\"floatingPassword\">Enter Your Password</label>\n                        <span class=\"error-feedback\" v-if=\"v$.password.$error\">{{ v$.password.$errors[0].$message }}</span>\n                    </div>\n                </div>\n            </div>\n            <br />\n            <div class=\"row g-3 align-items-center\">\n                <div class=\"col-auto d-block mx-auto\">\n\n                    <button type=\"submit\" @click=\"validateEmail()\" class=\"btn btn-primary w300\"> Sign Up Now </button>\n                    \n                    <div class=\"d-flex justify-content-center\">\n                        <button type=\"button\" @click=\"redirectTo({ val: 'login' })\" class=\"btn btn-link\">Have an account, Login Now</button>\n                    </div>\n\n                </div>\n            </div>\n            <br />\n            <div class=\"row g-3 align-items-center\">\n                <div class=\"col-auto d-block mx-auto alert alert-success\" v-if=\"successMessage.length>0\">\n                    {{ successMessage }}\n                </div>\n                <div class=\"col-auto d-block mx-auto alert alert-danger\" v-if=\"errorMessage.length>0\">\n                    {{ errorMessage }}\n                </div>\n            </div>\n        </form>\n    </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n// For redirect to links\nimport { mapActions } from \"vuex\";\n// For validate data\nimport useValidate from \"@vuelidate/core\";\nimport { required, email, minLength } from \"@vuelidate/validators\";\n\nexport default {\n    name: 'SignUpForm',\n    data() {\n        return {\n            v$: useValidate(),\n            name: '',\n            email: '',\n            password: '',\n            successMessage: \"\",\n            errorMessage: \"\",\n            userEmailExists: '',\n        }\n    },\n    validations() {\n        return {\n            name: { required, minLength: minLength(10) },\n            email: { required, email },\n            password: { required, minLength: minLength(10) },\n        }\n    },\n    mounted() {\n        let user = localStorage.getItem('user-info');\n        if (user) {\n            this.redirectTo({ val: 'home' });\n        }\n    },\n    methods: {\n\n        ...mapActions(['redirectTo']),\n\n        async validateEmail() {\n            let res = await axios.get(`http://localhost:3000/users?email=${this.email}`);\n            if (res.status==200) {\n                this.userEmailExists = res.data;\n                if (this.userEmailExists.length != 1) {\n                    this.successMessage = \"\";\n                    this.errorMessage = \"\";\n                    this.signUpNow();\n                } else {\n                    this.successMessage = \"\";\n                    this.errorMessage = \"This email already exists\";\n                }\n            }\n        },\n\n        async signUpNow() {\n            this.v$.$validate();\n            if (!this.v$.$error) {\n\n                let result = await axios.post('http://localhost:3000/users', {\n                    name: this.name,\n                    email: this.email,\n                    password: this.password,\n                });\n\n                if (result.status == 201) {\n\n                    // save user data in local storage\n                    localStorage.setItem(\"user-info\", JSON.stringify(result.data));\n\n                    this.errorMessage = '';\n                    this.successMessage = 'Loading ....';\n\n                    setTimeout(() => {\n                        // redirect to home page\n                        this.redirectTo({ val: 'home' });\n                    }, 2000);\n\n                    \n                } else {\n                    this.successMessage = '';\n                    this.errorMessage = 'Error on Adding New User';\n                }\n            } else {\n                this.successMessage = '';\n                this.errorMessage = 'You must fill in all fields';\n            }\n        },\n    },\n}\n</script>\n\n<style scoped lang=\"scss\">\n.w300 {\n    min-width: 300px;\n}\n\n.error-feedback,\n.form-group--error {\n    color: red;\n    font-size: 0.85em;\n}\n\n.form-group--error input,\n.form-group--error textarea,\n.form-group--error select {\n    border-color: red;\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}